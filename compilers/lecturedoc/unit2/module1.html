
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Κανονικές εκφράσεις &#8212; Compiler Labs Doc 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/mytheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Παράρτημα Α: Πληροφορίες για την Python3" href="../appendix-python/module1.html" />
    <link rel="prev" title="Εισαγωγή στη λεκτική ανάλυση" href="../unit1/module1.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
<div class="pageheader">
     <img src=../_static/banner.gif alt="mistral"/>
     <div>
        <h4>Τμήμα Πληροφορικής - Ιόνιο Πανεπιστήμιο</h4>
        <h2>Μεταγλωττιστές</h2>
        <h4>Εαρινό Εξάμηνο 2019-20</h4>        
        <h5>Μ.Στεφανιδάκης</h5>
      </div>    
</div>


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <a class="reference internal image-reference" href="../_images/by-sa3.png"><img alt="Creative Commons Attribution-ShareAlike 4.0 International License" src="../_images/by-sa3.png" style="width: 80px;" /></a>
<div class="section" id="id1">
<h1>Κανονικές εκφράσεις<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Στην ενότητα αυτή παρουσιάζονται οι κανονικές εκφράσεις (regular expressions) και η υποστήριξή τους στην Python.</p>
<div class="section" id="python">
<h2>Κανονικές εκφράσεις και Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>Στην Python (αλλά και σε πολλές άλλες γλώσσες προγραμματισμού) μπορούμε να φανταστούμε μια κανονική έκφραση ως μια μίνι-γλώσσα, η οποία χρησιμοποιείται για τη συγκρότηση μιας <em>μηχανής ταιριάσματος</em> (matching engine). Η μηχανή επεξεργάζεται το κείμενο εισόδου σύμφωνα με τις οδηγίες της κανονικής έκφρασης και επιστρέφει</p>
<ul class="simple">
<li><p>αν υπάρχει ταίριασμα (αληθές/ψευδές)</p></li>
<li><p>σε ποια σημεία (θέση στο κείμενο)</p></li>
<li><p>ποιο κομμάτι του κειμένου ταίριαξε με την προδιαγραφή</p></li>
<li><p>επίσης, η μηχανή μπορεί να αντικαταστήσει τα κομμάτια που ταίριαξαν, με άλλο κείμενο, αν αυτό ζητηθεί</p></li>
</ul>
<p>Η κανονική έκφραση περνά από μια διαδικασία μεταγλώττισης (compilation) και κατασκευάζεται ένα σύνολο οδηγιών για τη μηχανή ταιριάσματος. Η βασική μηχανή είναι γραμμένη σε C και πολύ γρήγορη σε εκτέλεση.</p>
<p>Η υλοποίηση του αυτομάτου που αντιστοιχεί στην κανονική έκφραση υλοποιείται μέσω backtracking. Αυτό σημαίνει ότι οι κανονικές εκφράσεις στην Python έχουν δυνατότητες πέρα από τις μαθηματικές κανονικές εκφράσεις, αλλά ταυτόχρονα απαιτείται προσοχή στον τρόπο κατασκευής της κανονικής έκφρασης: η απόδοση εξαρτάται από το πώς είναι γραμμένη.</p>
<div class="topic">
<p class="topic-title">Οι κανονικές εκφράσεις δεν είναι πάντοτε η λύση.</p>
<p>Η χρήση των κανονικών εκφράσεων είναι δύσκολη για τους μη πεπειραμένους και πρέπει να γίνεται με προσοχή. Εξετάστε αν μπορείτε να λύσετε το πρόβλημά σας με πιο απλό τρόπο πριν καταφύγετε στη λύση των κανονικών εκφράσεων.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Some people, when confronted with a problem, think &#39;I know, I&#39;ll use
regular expressions.&#39; Now they have two problems.
         -- Jamie Zawinski, alt.religion.emacs (08/12/1997)
</pre></div>
</div>
<p>Επίσης θα πρέπει πάντοτε να θυμάστε ότι όταν ψάχνουμε <strong>συγκεκριμένα strings σταθερού μήκους</strong> μέσα σε άλλα, οι κανονικές εκφράσεις <strong>δεν είναι η λύση</strong>. Υπάρχουν πολύ πιο αποδοτικοί αλγόριθμοι αναζήτησης strings. Στην Python είναι πάντα προτιμότερο στις περιπτώσεις αυτές να χρησιμοποιούνται μέθοδοι των strings κι όχι κανονικές εκφράσεις:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;abcd 123&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;345&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">-1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Χρήση κανονικών εκφράσεων στην Python<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Στην Python η υλοποίηση των κανονικών εκφράσεων είναι αντικειμενοστρεφής.</p>
<p>Η υποστήριξη των regular expressions υπάρχει ενσωματωμένη στη γλώσσα, στο module <code class="docutils literal notranslate"><span class="pre">re</span></code>:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
</pre></div>
</div>
</div></blockquote>
<p>Το <code class="docutils literal notranslate"><span class="pre">import</span></code> αυτό γίνεται <strong>μια φορά</strong> στην αρχή του προγράμματός σας και επιτρέπει να χρησιμοποιήσετε όλες τις μεθόδους, τις σταθερές και τα αντικείμενα του module <code class="docutils literal notranslate"><span class="pre">re</span></code>.</p>
<p>Στη συνέχεια, μπορείτε να φτιάξετε «μηχανές ταιριάσματος» με τη βοήθεια της συνάρτησης <code class="docutils literal notranslate"><span class="pre">re.compile()</span></code>, π.χ.:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^cat&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Στο προηγούμενο παράδειγμα, η μεταβλητή <code class="docutils literal notranslate"><span class="pre">rexp</span></code> είναι η μηχανή ταιριάσματος, ένα αντικείμενο δηλαδή που μας επιτρέπει να ψάξουμε για ταιριάσματα σύμφωνα με την κανονική έκφραση <code class="docutils literal notranslate"><span class="pre">^cat</span></code>. Το αντικείμενο <strong>κατασκευάζεται άπαξ</strong> (π.χ. στην αρχή του προγράμματος). Στη συνέχεια, μπορούμε να το χρησιμοποιήσουμε <strong>όσες φορές θέλουμε</strong> για να ταιριάξουμε κείμενο:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Η μέθοδος <code class="docutils literal notranslate"><span class="pre">search()</span></code> είναι η βασική μέθοδος της μηχανής αναζήτησης <code class="docutils literal notranslate"><span class="pre">rexp</span></code> και αναζητά το σχέδιο ταιριάσματος της αντίστοιχης κανονικής έκφρασης (<code class="docutils literal notranslate"><span class="pre">^cat</span></code>) οπουδήποτε μέσα στο string <code class="docutils literal notranslate"><span class="pre">category</span></code>. Η επιστρεφόμενη τιμή στη μεταβλητή <code class="docutils literal notranslate"><span class="pre">m</span></code> περιέχει ένα «αντικείμενο ταιριάσματος» με πληροφορίες για το τι (αν) ταίριαξε στην αναζήτηση:</p>
<ul class="simple">
<li><p>Το <code class="docutils literal notranslate"><span class="pre">m</span></code> είναι <code class="docutils literal notranslate"><span class="pre">None</span></code> σε περίπτωση αποτυχίας ταιριάσματος.</p></li>
<li><p>Αν υπάρχει ταίριασμα, το <code class="docutils literal notranslate"><span class="pre">m</span></code> περιέχει μεθόδους για να λάβουμε την πληροφορία του ταιριάσματος.</p></li>
</ul>
<p>Έτσι, μπορούμε για παράδειγμα να γράψουμε:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">m</span><span class="p">:</span>   <span class="c1"># m is not None</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found! matched=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>

<span class="k">else</span><span class="p">:</span>   <span class="c1"># m is None</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Το <code class="docutils literal notranslate"><span class="pre">m.group(0)</span></code> επιστρέφει το συνολικό κείμενο που ταίριαξε. Τα <em>groups</em> είναι μέρη του ταιριάσματος και θα αναλυθούν στα επόμενα.</p>
<p>Στη συνέχεια δίνεται το συνολικό προηγούμενο παράδειγμα</p>
<ul>
<li><p>Στο interactive shell της Python (αν θέλετε να το δοκιμάσετε, ξεκινήστε το interactive shell με την εντολή <code class="docutils literal notranslate"><span class="pre">python3</span></code> (ή <code class="docutils literal notranslate"><span class="pre">python</span></code>) στη κονσόλα/τερματικό/command prompt του λειτουργικού σας. Θυμηθείτε ότι δεν πληκτρολογείτε τα <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code>):</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;I see a cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 3), match=&#39;cat&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">cat</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Ως αυτόνομο αρχείο εκτέλεσης (τρέξτε με <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">yourfile.py</span></code> ή <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">yourfile.py</span></code>):</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^cat&#39;</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found! matched=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;not found&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>Στις επόμενες παραγράφους αναφέρονται <strong>μερικά μόνο</strong> από τα εργαλεία της Python για κανονικές εκφράσεις. Για την πλήρη περιγραφή του module <code class="docutils literal notranslate"><span class="pre">re</span></code>, δείτε στο <a class="reference external" href="https://docs.python.org/3/library/re.html">https://docs.python.org/3/library/re.html</a>.</p>
</div>
<div class="section" id="id3">
<h3>Βασικά σύμβολα κανονικών εκφράσεων<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Ο πίνακας που ακολουθεί περιέχει τα βασικά σύμβολα που χρησιμοποιούνται για την κατασκευή κανονικών εκφράσεων στην Python (<em>παρατίθενται μόνο τα σύμβολα που έχουν διδαχθεί έως τώρα στο εργαστήριο</em>).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">abc</span></code></p></td>
<td><p>ταιριάζει ακριβώς το γράμμα <code class="docutils literal notranslate"><span class="pre">a</span></code>, ακολουθούμενο από το <code class="docutils literal notranslate"><span class="pre">b</span></code> και μετά το <code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">a|b</span></code></p></td>
<td><p>είτε το <code class="docutils literal notranslate"><span class="pre">a</span></code>, είτε το <code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[abc]</span></code></p></td>
<td><p>character class: ένα από τα <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code> ή <code class="docutils literal notranslate"><span class="pre">c</span></code> (<strong>προσοχή: ένας χαρακτήρας μόνο</strong>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[a-zA-Z]</span></code></p></td>
<td><p>όπως προηγουμένως, αλλά σε ένα πεδίο τιμών, από <code class="docutils literal notranslate"><span class="pre">a</span></code> έως και  <code class="docutils literal notranslate"><span class="pre">z</span></code> και από <code class="docutils literal notranslate"><span class="pre">A</span></code> έως και <code class="docutils literal notranslate"><span class="pre">Z</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[^ab]</span></code></p></td>
<td><p>ένας οποιοσδήποτε χαρακτήρας, <strong>εκτός από</strong> <code class="docutils literal notranslate"><span class="pre">a</span></code> ή <code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$</span></code></p></td>
<td><p>ταιριάζει <strong>στο τέλος</strong> του string (ρυθμίζεται να ταιριάζει και στο τέλος κάθε γραμμής του string)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td><p>ταιριάζει <strong>στην αρχή</strong> του string (ρυθμίζεται να ταιριάζει και στην αρχή κάθε γραμμής του string)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></td>
<td><p>ένας <strong>οποιοσδήποτε</strong> χαρακτήρας εκτός από newline (ρυθμίζεται να ταιριάζει και το newline)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
<td><p>0 ή 1 φορά ο χαρακτήρας που προηγείται</p></td>
</tr>
</tbody>
</table>
<p>Με βάση τα πιο πάνω μπορούμε να συντάξουμε πιο σύνθετες κανονικές εκφράσεις, συνδυάζοντας πολλές μικρότερες.</p>
</div>
<div class="section" id="id4">
<h3>Παραδείγματα<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Παραδείγματα με τα σύμβολα που έχουν διδαχθεί έως τώρα στο εργαστήριο. Τα παραδείγματα δίνονται στο interactive shell της Python, θεωρήστε ότι έχει προηγηθεί το <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">re</span></code>.</p>
<div class="topic">
<p class="topic-title">Πηγή παραδειγμάτων</p>
<p>Πολλά από τα παραδείγματα που ακολουθούν βασίζονται σε υλικό από το βιβλίο “Mastering Regular Expressions”, 2nd ed., Jeffrey E.F. Friedl, O’Reilly Media, July 2002.</p>
</div>
<p>Βρείτε το string <code class="docutils literal notranslate"><span class="pre">cat</span></code> στην αρχή ή στο τέλος ενός string:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;I see a cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 3), match=&#39;cat&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;cat&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;cat$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;in category&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;black cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">m</span>
<span class="go">&lt;_sre.SRE_Match object; span=(6, 9), match=&#39;cat&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">m</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found!&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">found!</span>
</pre></div>
</div>
</div></blockquote>
<p>Για να ταιριάξουμε ένα άδειο string, θα μπορούσαμε (θεωρητικά -δεν χρειάζεται στην πράξη!) να χρησιμοποιήσουμε το <code class="docutils literal notranslate"><span class="pre">'^$'</span></code>.</p>
<p>Κλάσεις χαρακτήρων με το <code class="docutils literal notranslate"><span class="pre">[]</span></code>. Θυμηθείτε ότι μέσα στην κλάση, οι χαρακτήρες ελέγχου χάνουν το ειδικό τους νόημα και το <code class="docutils literal notranslate"><span class="pre">^</span></code> σημαίνει κάτι διαφορετικό:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;gr[ae]y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a gray cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">m</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found!&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">found!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a grey cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">m</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found!&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">found!</span>
</pre></div>
</div>
</div></blockquote>
<p>Βρείτε <code class="docutils literal notranslate"><span class="pre">a</span></code> που δεν ακολουθείται από <code class="docutils literal notranslate"><span class="pre">b</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;a[^b]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;acb&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 2), match=&#39;ac&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">ac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ba&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
</div></blockquote>
<p>Στο τελευταίο παράδειγμα βλέπουμε ότι ενώ το <code class="docutils literal notranslate"><span class="pre">a</span></code> δεν πρέπει να ακολουθείται από <code class="docutils literal notranslate"><span class="pre">b</span></code>, <strong>πρέπει όμως να ακολουθείται από κάτι άλλο</strong>.</p>
<p>Βρείτε το gray ή grey με εναλλαγή (alternation): 2 σωστοί και ένας λάθος τρόπος</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;gray|grey&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a gray cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">m</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found!&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">found!</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;gr(a|e)y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a gray cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">m</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;found!&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">found!</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;gra|ey&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a gray cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(2, 5), match=&#39;gra&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">gra</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a grey cat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(4, 6), match=&#39;ey&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">ey</span>
</pre></div>
</div>
</div></blockquote>
<p>Στο τελευταίο παράδειγμα έχουμε ταίριασμα, δεν είναι όμως αυτό που θέλουμε. <strong>Η χρήση των παρενθέσεων είναι αναγκαία για το σωστό ταίριασμα</strong>!</p>
<div class="topic">
<p class="topic-title">Οι παγίδες της εναλλαγής</p>
<p><strong>Προσοχή:</strong> Η εναλλαγή (<code class="docutils literal notranslate"><span class="pre">|</span></code>) στις υλοποιήσεις με backtracking, όταν ταιριάζουν δύο ή περισσότερες επιλογές, επιστρέφει την <strong>πρώτη, από αριστερά προς τα δεξιά</strong> κι όχι τη μεγαλύτερη σε μήκος όπως θα περίμενε κανείς.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;long|longest&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;longest&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="go">long</span>
</pre></div>
</div>
</div>
<p>Χρήση της τελείας <code class="docutils literal notranslate"><span class="pre">.</span></code> για να ταιριάξουμε οτιδήποτε (εκτός από newline! Για να ταιριάξετε και το newline στο re.compile() προσθέστε το επιπλέον όρισμα <code class="docutils literal notranslate"><span class="pre">re.DOTALL</span></code>)</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;a.c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 3), match=&#39;abc&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;acb&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a</span><span class="se">\n</span><span class="s1">c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;a.c&#39;</span><span class="p">,</span><span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;a</span><span class="se">\n</span><span class="s1">c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 3), match=&#39;a\nc&#39;&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>Προαιρετικό: <code class="docutils literal notranslate"><span class="pre">color</span></code> ή <code class="docutils literal notranslate"><span class="pre">colour</span></code>;</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;colou?r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 5), match=&#39;color&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colour&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 6), match=&#39;colour&#39;&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="topic">
<p class="topic-title">Ποιο είναι το προαιρετικό;</p>
<p><strong>Προσοχή:</strong> Το προαιρετικό εφαρμόζεται στον <strong>έναν χαρακτήρα</strong> αριστερά από το <code class="docutils literal notranslate"><span class="pre">?</span></code>. Αν θέλετε να είναι προαιρετικοί περισσότεροι χαρακτήρες, χρησιμοποιήστε παρενθέσεις:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rexp</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;col(ou)?r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colour&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 6), match=&#39;colour&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">rexp</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;colr&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;_sre.SRE_Match object; span=(0, 4), match=&#39;colr&#39;&gt;</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Περιεχόμενα</a></h3>
  <ul>
<li><a class="reference internal" href="#">Κανονικές εκφράσεις</a><ul>
<li><a class="reference internal" href="#python">Κανονικές εκφράσεις και Python</a><ul>
<li><a class="reference internal" href="#id2">Χρήση κανονικών εκφράσεων στην Python</a></li>
<li><a class="reference internal" href="#id3">Βασικά σύμβολα κανονικών εκφράσεων</a></li>
<li><a class="reference internal" href="#id4">Παραδείγματα</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
    </div>

    

    
  </body>
</html>